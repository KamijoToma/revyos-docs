# Compiler-related Instructions

RevyOS will pre-install related optimized compilers that basically support `rv64gc`

## Common Extensions


| Supported Optimization | gcc-10 | gcc-13 | clang-17 |
| :--: | :--: | :--: | :--: |
| Zfh  | ✅ | ✅ | ✅ |
| v0p7 | ✅ | ❌ | ❌ |


## THead Vendor Extensions

*xthead current version v2.2*

| Supported Optimization<sup>1</sup> | gcc-10<sup>2</sup> | gcc-13.2 | clang-17 |
| :--: | :--: | :--: | :--: |
| XTheadCmo              | ✅ | ✅ | ✅ |
| XTheadSync             | ✅ | ✅ | ✅ |
| XTheadBa               | ✅ | ✅ | ✅ |
| XTheadBb               | ✅ | ✅ | ✅ |
| XTheadBs               | ✅ | ✅ | ✅ |
| XTheadCondMov          | ✅ | ✅ | ✅ |
| XTheadMemIdx           | ✅ | ✅ | ✅ |
| XTheadMemPair          | ✅ | ✅ | ✅ |
| XTheadFMemIdx          | ✅ | ✅ | ✅ |
| XTheadMac              | ✅ | ✅ | ✅ |
| XTheadFmv              | ✅ | ✅ | ❌ |
| XTheadInt              | ✅ | ✅ | ❌ |
| XTHeadVdot<sup>3</sup> | ✅ | ✅ | ✅ |

Notes:

1. gcc-11/gcc-12/clang-14/clang15/clang16 have too few or no xthead extensions, so they are not listed
2. gcc-10 uses xtheadc to cover all extensions; gcc-10 uses the source code from thead-gcc
3. XTHeadVdot is not supported by c910v/c920

## Reference Documents

- [xthead extension reference](https://github.com/T-head-Semi/thead-extension-spec)
- [gcc merge xthead extension commit](https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=8351535f20b52cf332791f60d2bf22a025833516)
- [clang-17 xthead extension document](https://github.com/llvm/llvm-project/blob/release/17.x/llvm/docs/RISCVUsage.rst#vendor-extensions)
